
1. [意想不到的代码隐藏](#意想不到的代码隐藏)
2. [不必要的嵌套代码](#不必要的嵌套代码)


代码和项目组织

## 命名规范

- 包命名：包的名字应是小写的，并且只应包含字母和数字，不允许以数字作为包名的开头（短且简单、缩写、避免命名冲突、避免通用包）
- 文件夹名和包名通常是一样的，除了少数例外，一个文件夹只能包含一个包，同一目录/包内的所有文件都必须声明相同的包名
- 文件命名：惯例是使用小写字母和下划线



## 意想不到的代码隐藏

```go
func listing4() error {
	var client *http.Client
	var err error
	if tracing {
		client, err = createClientWithTracing()
	} else {
		client, err = createDefaultClient()
	}
	if err != nil {
		return err
	}

	_ = client
	return nil
}
```


## 不必要的嵌套代码

把正确的代码路径向左对齐

```go
func join2(s1, s2 string, max int) (string, error) {
	if s1 == "" {
		return "", errors.New("s1 is empty")
	}
	if s2 == "" {
		return "", errors.New("s2 is empty")
	}
	concat, err := concatenate(s1, s2)
	if err != nil {
		return "", err
	}
	if len(concat) > max {
		return concat[:max], nil
	}
	return concat, nil
}
```


减少嵌套块的数量，对齐左侧的正常代码路径，以及尽早的返回

```go
	if foo() {
		return true
	} else {
		return false
	}

	if foo() {
		return true
	}
	return false // 我们应该省略 else 块


	if s != "" {
		//... do something
	} else {
		return errors.New("empty string")
	}

	if s == "" {// 翻转 if 条件，保留左侧边缘正常路径
		return errors.New("empty string")
	}
	//... do something


```                                                                                                                             

