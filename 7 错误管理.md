1. [#48: panic](#48-panic)
2. [#49：搞不清何时需要包装错误](#49搞不清何时需要包装错误)


# #48: panic

>在 Go 代码里，使用 panic 处理错误只应该用于一些比较少见的不可恢复的场景：触发了一个不该发生的代码错误，活着加载必需的依赖时失败了。因此，有一些特殊情况需要我们停止应用程序。在大多数情况下，错误管理应该由函数将适当的错误类型作为最后一个参数返回来完成。


# #49：搞不清何时需要包装错误

>错误包装使用场景：添加上下文信息和标记错误，把一个错误转变为另一个特定的错误。

如果需要标记错误，使用自定义错误类型

```go
func bar() error {
	return barError{}
}
// 用 BarError 包装错误
type BarError struct {
	Err error
}

func listing2() error {
	err := bar()
	if err != nil {
		return BarError{Err: err} // 不直接返回 err,而是用 BarError 包装错误
	}
	// ...
	return nil
}
```

添加上下文信息

```go
    if err != nil {
		return fmt.Errorf("bar failed: %w", err) // 添加上下文信息，可获取原始错误
	}

	if err != nil {
		return fmt.Errorf("bar failed: %v", err) // 添加上下文信息，不可获取原始错误
	}
```

